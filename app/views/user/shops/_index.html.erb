<div class="row">


  <% shops.each do |shop| %>
  <div class="col-lg-4 col-md-6 mb-2">
    <div class="card" style="width: 17rem;">

      <div class="card-header p-0">
        <div class="zoomInText">
          <%= link_to shop_path(shop.id) do %>
           <span class="mask">
              <%= attachment_image_tag shop, :shop_image, size: '200x200', format: 'jpeg', class: "card-img" %>
              <span class="cap">
              <h4 class="shop-name"><%= shop.shop_name %></h4></br>
              <h6 class="fas fa-star">&nbsp;
                <% if shop.reviews.average(:rate) == nil %>
                  評価なし
                <% else %>
                  <%= shop.reviews.average(:rate).round(1) %>
                <% end %>
              </h6></br>
              <h6 class="fas fa-comment-dots">&emsp;<%= shop.reviews.count %></h6>
              </span>
            </span>
          <% end %>
        </div>
      </div>

    </div>
  </div>
  <% end %>
</div>


<script>
  $('.average-review-rating').raty({
    readOnly: true,
    path: '/assets/',
    score: function() {
      return $(this).attr('data-score')
    }
  });
</script>
